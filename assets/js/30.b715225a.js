(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{529:function(s,a,n){"use strict";n.r(a);var e=n(6),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[s._v("#")]),s._v(" "),n("strong",[s._v("说明:")])]),s._v(" "),n("p",[s._v("通过MySQL的 information_schema 数据库，可查询数据库中每个表占用的空间、表记录的行数；该库中有一个 TABLES 表，这个表主要字段分别是：")]),s._v(" "),n("p",[s._v("TABLE_SCHEMA : 数据库名\nTABLE_NAME：表名\nENGINE：所使用的存储引擎\nTABLES_ROWS：记录数\nDATA_LENGTH：数据大小\nINDEX_LENGTH：索引大小")]),s._v(" "),n("p",[s._v("其他字段请参考MySQL的手册，查看一个表占用空间的大小，那就相当于是 "),n("strong",[s._v("数据大小 + 索引大小")]),s._v(" 。")]),s._v(" "),n("h2",{attrs:{id:"查看所有库的大小"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看所有库的大小"}},[s._v("#")]),s._v(" "),n("strong",[s._v("查看所有库的大小")])]),s._v(" "),n("div",{staticClass:"language-MySQL line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mysql> use information_schema;\nDatabase changed\nmysql> select concat(round(sum(DATA_LENGTH/1024/1024),2),'MB') as data  from TABLES;\n+----------+\n| data     |\n+----------+\n| 104.21MB |\n+----------+\n1 row in set (0.11 sec)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"查看指定库的大小"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看指定库的大小"}},[s._v("#")]),s._v(" "),n("strong",[s._v("查看指定库的大小")])]),s._v(" "),n("div",{staticClass:"language-MySQL line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mysql> select concat(round(sum(DATA_LENGTH/1024/1024),2),'MB') as data  from TABLES where table_schema='jishi';\n+---------+\n| data    |\n+---------+\n| 26.17MB |\n+---------+\n1 row in set (0.01 sec)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"查看指定库的指定表的大小"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看指定库的指定表的大小"}},[s._v("#")]),s._v(" "),n("strong",[s._v("查看指定库的指定表的大小")])]),s._v(" "),n("div",{staticClass:"language-MySQL line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mysql> select concat(round(sum(DATA_LENGTH/1024/1024),2),'MB') as data  from TABLES where table_schema='jishi' and table_name='a_ya';\n+--------+\n| data   |\n+--------+\n| 0.02MB |\n+--------+\n1 row in set (0.00 sec)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"查看指定库的索引大小"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看指定库的索引大小"}},[s._v("#")]),s._v(" "),n("strong",[s._v("查看指定库的索引大小")])]),s._v(" "),n("div",{staticClass:"language-MySQL line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mysql> SELECT CONCAT(ROUND(SUM(index_length)/(1024*1024), 2), ' MB') AS 'Total Index Size' FROM TABLES  WHERE table_schema = 'jishi'; \n+------------------+\n| Total Index Size |\n+------------------+\n| 0.94 MB          |\n+------------------+\n1 row in set (0.01 sec)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"查看指定库的指定表的索引大小"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看指定库的指定表的索引大小"}},[s._v("#")]),s._v(" "),n("strong",[s._v("查看指定库的指定表的索引大小")])]),s._v(" "),n("div",{staticClass:"language-MySQL line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mysql> SELECT CONCAT(ROUND(SUM(index_length)/(1024*1024), 2), ' MB') AS 'Total Index Size' FROM TABLES  WHERE table_schema = 'test' and table_name='a_yuser'; \n+------------------+\n| Total Index Size |\n+------------------+\n| 21.84 MB         |\n+------------------+\n1 row in set (0.00 sec)\nmysql> show create table test.a_yuser\\G;\n*************************** 1. row ***************************\n       Table: a_yuser\nCreate Table: CREATE TABLE `a_yuser` (\n  `email` varchar(60) NOT NULL DEFAULT '',\n  `user_name` varchar(60) NOT NULL DEFAULT '',\n  KEY `cc` (`email`(5)),\n  KEY `ccb` (`user_name`(5)),\n  KEY `ccbc` (`email`(5),`user_name`(5))\n) ENGINE=MyISAM DEFAULT CHARSET=utf8\n1 row in set (0.00 sec)\n \nERROR: \nNo query specified\n \nmysql> select count(*) from test.a_yuser;\n+----------+\n| count(*) |\n+----------+\n|  1073607 |\n+----------+\n1 row in set (0.00 sec)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("h2",{attrs:{id:"查看一个库中的情况"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看一个库中的情况"}},[s._v("#")]),s._v(" "),n("strong",[s._v("查看一个库中的情况")])]),s._v(" "),n("div",{staticClass:"language-MySQL line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mysql>  SELECT CONCAT(table_schema,'.',table_name) AS 'Table Name', CONCAT(ROUND(table_rows/1000000,4),'M') AS 'Number of Rows', CONCAT(ROUND(data_length/(1024*1024*1024),4),'G') AS 'Data Size', CONCAT(ROUND(index_length/(1024*1024*1024),4),'G') AS 'Index Size', CONCAT(ROUND((data_length+index_length)/(1024*1024*1024),4),'G') AS'Total'FROM information_schema.TABLES WHERE table_schema LIKE 'test';\n+---------------+----------------+-----------+------------+---------+\n| Table Name    | Number of Rows | Data Size | Index Size | Total   |\n+---------------+----------------+-----------+------------+---------+\n| test.a_br     | 0.4625M        | 0.0259G   | 0.0171G    | 0.0431G |\n| test.a_skuclr | 0.7099M        | 0.0660G   | 0.0259G    | 0.0919G |\n| test.a_yuser  | 1.0736M        | 0.0497G   | 0.0213G    | 0.0710G |\n| test.test     | 0.0000M        | 0.0000G   | 0.0000G    | 0.0000G |\n+---------------+----------------+-----------+------------+---------+\n4 rows in set (0.13 sec)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"查看数据库-表-索引大小的情况"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看数据库-表-索引大小的情况"}},[s._v("#")]),s._v(" "),n("strong",[s._v("查看数据库,表，索引大小的情况")])]),s._v(" "),n("div",{staticClass:"language-MySQL line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("-- 查看数据库,表，索引大小的情况\n-- use information_schema;\nSELECT CONCAT(table_schema, '.', table_name)                                      AS 'Table Name',\n       CONCAT(ROUND(table_rows / 1000000, 4), 'M')                                AS 'Number of Rows',\n       CONCAT(ROUND(data_length / (1024 * 1024 * 1024), 4), 'G')                  AS 'Data Size',\n       CONCAT(ROUND(index_length / (1024 * 1024 * 1024), 4), 'G')                 AS 'Index Size',\n       CONCAT(ROUND((data_length + index_length) / (1024 * 1024 * 1024), 4), 'G') AS 'Total',\n       CONCAT(ROUND(data_free / (1024 * 1024 * 1024), 4), 'G')                    AS 'Data Free Size' -- 查看库中各表data_free值，单位是字节，data_free/1024/1024/1024即为理论上释放后可以恢复空间G。\nFROM information_schema.TABLES\nWHERE TABLE_TYPE = 'BASE TABLE'\n  and table_schema in\n      ('admin_user', 'customer_user', 'dynamicresource', 'finance', 'gift', 'job_quartz', 'mcmall','middle', 'order', 'product',\n       'rm', 'srm', 'statistics', 'syslog')\norder by Total desc;\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);